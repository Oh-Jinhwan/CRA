<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>ALU.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
#pragma once

#include &lt;string&gt;
#include "result.cpp"
// Ä¿¹ö¸®Áö È®ÀÎ : ¾Æ·¡ ¸í·É¾î¸¦ °³¹ßÀÚ PowerShell¿¡ ÀÔ·Â (º¸±â-ÅÍ¹Ì³Î)
// ÇÁ·ÎÁ§Æ®ÀÇ coverageÆú´õ ¾È¿¡ °á°ú ÆÄÀÏ»ý¼ºµÊ
// ¼Ò½ºÄÚµå°¡ cµå¶óÀÌºê¿¡ ÀÖÀ»°Í. x64·Î ºôµåÇÒ°Í
// OpenCppCoverage.exe --sources C:*.c --export_type=html:coverage -- .\x64\Debug\UnitTest.exe

class ALU
{
    const int RESULT_DEFAULT = 65535;
    const int STATUS_NO_RESULT = -1;
    const int STATUS_SUCCESS = 0;
    const int STATUS_FAIL_OP1 = 1;
    const int STATUS_FAIL_OP2 = 2;
    const int STATUS_FAIL_OPCODE = 3;
    const int OPERAND_INVALID = -1;

    int operand1 = OPERAND_INVALID;
    int operand2 = OPERAND_INVALID;
    std::string OPCODE = "";

public:

<span style = "background-color:#dfd">    void enableSignal(Result* r) {
        if(isInValidOpCode(r)) return;
        if (isInValidOperand(r)) return;</span>

<span style = "background-color:#dfd">        int result = getResult();
        setResult(r, result, STATUS_SUCCESS);
    }</span>

<span style = "background-color:#dfd">    void setOperand1(int operand1) {
        this-&gt;operand1 = operand1;
    }</span>

<span style = "background-color:#dfd">    void setOperand2(int operand2) {
        this-&gt;operand2 = operand2;
    }</span>

<span style = "background-color:#dfd">    void setOPCODE(std::string OPCODE) {
        this-&gt;OPCODE = OPCODE;
    }</span>

private :
    bool isInValidOpCode(Result* r)
<span style = "background-color:#dfd">    {
	    if(OPCODE != "ADD" &amp;&amp; OPCODE != "MUL" &amp;&amp; OPCODE != "SUB")</span>
	    {
<span style = "background-color:#dfd">            setResult(r, RESULT_DEFAULT, STATUS_FAIL_OPCODE);
            return true;</span>
	    }
<span style = "background-color:#dfd">        return false;
    }</span>
    bool isInValidOperand(Result* r)
<span style = "background-color:#dfd">    {
        bool result = false;
        if (operand1 == OPERAND_INVALID) {
            setResult(r, RESULT_DEFAULT, STATUS_FAIL_OP1);
            result = true;
        }
        else if (operand2 == OPERAND_INVALID) {
            setResult(r, RESULT_DEFAULT, STATUS_FAIL_OP2);
            result = true;</span>
        }
<span style = "background-color:#dfd">        return result;
    }</span>

    int getResult()
<span style = "background-color:#dfd">    {
        int result = RESULT_DEFAULT;
        if (OPCODE == "ADD") result = operand1 + operand2;
        else if (OPCODE == "MUL") result = operand1 * operand2;
        else if (OPCODE == "SUB") result = operand1 - operand2;
        return result;
    }</span>

    void setResult(Result* r, int result, int status)
<span style = "background-color:#dfd">    {
        r-&gt;setResult(result);
        r-&gt;setStatus(status);
    }</span>
};</pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>